<script>
  const form = document.getElementById("upload-form");
  const status = document.getElementById("status");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    status.textContent = "Enviando...";

    const formData = new FormData(form);

    try {
      const response = await fetch("/vectorize", {
        method: "POST",
        body: formData,
      });

      if (!response.ok) {
        status.textContent = "Erro ao vetorizar imagem.";
        return;
      }

      const blob = await response.blob();
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "vetorizado.svg";
      link.click();
      status.textContent = "Download concluído!";
    } catch (err) {
      status.textContent = "Erro na requisição.";
      console.error(err);
    }
  });
</script>
